global:
  externalUrlkn: staging.knowledgenet.co
  externalUrl: http://staging.knowledgenet.co
  externalUrlEs: staging-es.knowledgenet.co
  tlssecret: knco-tls-secret

## Whether to expose the node ports of the pods in the cluster - useful for
  ## development, because it allows you to connect directly to pods without using
  ## kubectl port-forwad
  exposeNodePorts: false
  ## How to handle rolling updates during a deployment. If set to 0, kubernetes
  ## will happily take down pods while it replaces them (useful for dev setups).
  ## If set to 1, kubernetes will make sure one pod is available to take requests
  ## during upgrades. 0 by default.
  rollingUpdate:
    maxUnavailable: 0

 # All modules except web-server & gateway should use magda offical image
 # Here, if unspecified, the following default value will be used:
  image:
    repository: data61 # magda docker hub repo
    tag: 0.0.50-RC2  # This version will be increased when magda releases a new version
    pullPolicy: IfNotPresent

## Whether to used the combined db - if this is true all the databases used
  ## by magda will be consolidated into a single pod. If it's false, they'll
  ## all run in separate pods unless some managed postgres solution (e.g.
  ## useCloudSql) is specified elsewhere.
  ## Running in separate pods scales better, but requires more resources
  useCombinedDb: false

## Whether to use the Google Cloud SQL managed postgres solution. Only set
  ## this to true if you already have cloud sql set up and be sure to look at
  ## settings for the cloud-sql-proxy service below.
  useCloudSql: true

## Whether to enable kubernetes liveness probes - these continually hit pods in
  ## order to see whether they're still alive and restart them upon too many failures.
  ## This is essential for prod, but tends to create a lot of overhead in development
  enableLivenessProbes: true

## Tags allow for services to be turned on and off on the fly... e.g. if you don't need
## to send emails, turn the correspondence-api off
tags:
  ## "all" is a shortcut which turns on all services except minions.
  all: false

  ## General services. Note that if you are using combined-db, you need to set both
  ## combined-db and the databases that you are using (e.g. authorization-db) to true.
  ## You can find explanations of what each of these are below
  admin-api: false
  apidocs-server: true
  authorization-api: true
  authorization-db: true
  # cloud-sql-proxy: true
  combined-db: true
  content-db: true
  content-api: true
  correspondence-api: false
  elasticsearch: true
  gateway: true
  indexer: true
  preview-map: true
  registry-api: true
  registry-db: true
  search-api: true
  session-db: true
  web-server: true
  connectors: true

  ## Whether to use an ingress, which is necessary for HTTPS and using the Google CDN with
  ## Google Kubernetes Engine. By default this is off, and access is provided to the cluster
  ## through a Kubernetes LoadBalancer service
  # ingress: false

  ## Minions, which listen to changes in the registry and add extra metadata
  minion-broken-link: false
  minion-linked-data-rating: false
  minion-visualization: false
  minion-format: true

  ## A extra test chart that is maintained outside magda project
  test-chart: true

magda:
  gateway:
    image:
      repository: "localhost:5000/data61"
      tag: "latest"
    enableAuthEndpoint: true
    cors:
      credentials: true
      origin: true
    auth:
      facebookClientId: ""
      googleClientId: "667942079301-49aomsf5l1i8tc5amdot6ck96e1d84c6.apps.googleusercontent.com"
      aafClientUri: "https://rapid.test.aaf.edu.au/jwt/authnrequest/research/IeiWdzrJ47-eSowf3rfLTQ"

  registry-api:
    skipAuthorization: true
    
  web-server:
    image:
      repository: "localhost:5000/data61"
      tag: "latest"
    fallbackUrl: "https://data.gov.au"
    useLocalStyleSheet: true

  connectors:
    includeCronJobs: false
    config:
      - image:
          name: magda-dap-connector
        id: dap
        name: CSIRO
        sourceUrl: https://data.csiro.au/dap/ws/v2/
        pageSize: 100
        schedule: 30 3 */3 * *
        ignoreHarvestSources: []

test-chart:
  service:
    type: NodePort
    nodePorts:
      http: 30888
  vhost: |-
    server {
      listen 0.0.0.0:8080;
      default_type text/plain;
      location / {
        return 200 "This is a KN test-chart!";
      }
    }
  